{% extends 'base.html' %}

{% block content %}
  <h2>game</h2>

  <form action="/suggest/" method="POST">
    {% csrf_token %}

    <label for="reset_quest_members">Who should go on this quest?</label>

    <br><br>
    {% for game_user in game_users %}
      <input
        type="checkbox"
        id={{ game_user.pk }}
        name="users"
        value={{ game_user.pk }}>
      <label for={{ game_user.pk }}>{{ game_user.user.username }}</label>
      <br>
    {% endfor %}
    <br>

    <input type="text" name="game_pk" value={{ pk }} hidden />
    <input type="submit" value="Pick your crew" />
  </form>

  <h3>current state</h3>

  current_quest: {{ current_quest.pk }}<br>
  quest_master: {{ quest_master.user.username }}<br>

  quest_members:
  {% for m in current_quest.members %}
    <a>{{ m.member.user.username }}, </a>
  {% endfor %}<br>

  passed?: {{ current_quest.is_successful }}<br>

  <h3>quests</h3>

  {% for quest in quests %}
    num_players: {{ quest.num_players }}<br>
    quest id: {{ quest.id }}
    &ensp;&ensp;&ensp;&ensp;
    [{{ quest.prev_quest_id }}, {{ quest.next_quest_id }}]<br>
    {{ quest.is_successful }}<br>

    quest_members:
    {% for m in quest.members %}
      <a>{{ m.member.user.username }}, </a>
    {% endfor %}<br>

    <br>
  {% endfor %}

  <h3>metadata</h3>

  id: {{ pk }}<br>

  users:
  {% for u in users %}
    <a>{{ u.username }}, </a>
  {% endfor %}<br>

  quest_sizes:  {{ quest_sizes }}<br>
  current_quest:  {{ current_quest.pk }}<br>

  <br>

  assasin:  {{ assasin }}<br>
  merlin:  {{ merlin }}<br>
  mordred:  {{ mordred }}<br>
  morgana:  {{ morgana }}<br>
  percival:  {{ percival }}<br>

  <br>

  loyals:
  {% for s in loyal_servants %}
    <a>{{ s.user.username }}, </a>
  {% endfor %}<br>

  <br>

  minions:
  {% for s in minions_of_mordred %}
    <a>{{ s.user.username }}, </a>
  {% endfor %}<br>

  <br><br><br><br><br><br><br><br><br><br><br>

{% endblock %}